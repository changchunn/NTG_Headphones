# NTG_Headphones

Apple的强大勿庸置疑，TWS耳机市场在AirPods出现前不温不火，AirPods出现后整个行业被引爆，“几番仍效法,至今仍领先”说的就是它。前段时间无意中看到一个新闻说是Apple要出一款高阶头戴式耳机AirPods Studio，不由得想起了两年前给‘牢’厂开发过的一款“胎死腹中”的高阶头戴式耳机。回顾这个项目“作死”的过程，反思过去工作中的是非得失，展望未来高阶产品开发成功之路。 </br>

立项的时候本来是一小伙伴负责这个项目，但‘牢’厂要求供应商工程师专人专案，不允许工程师同时接两个项目，小伙伴手中已经有个AM61在跑，领导询了一圈没人主动愿接，因为接‘牢’厂的项目受累不讨好 (做好了是应该的，做不好就是背锅侠)；还有就是会议多，经常性的开到半夜，‘牢’厂的工程师只要他需要，晚上一二点拉电话会议不会说声抱歉。不晓得怎的就分派给我了，有可能是因为当时手上一个项目已经准备量产，正在捣腾的3020又不着急，没什么急的项目。既然领导已经分配，又没什么理由来拒绝，只好将就接下来了。</br>

接手的时候需求包已经拆得七七八八，把需求重新整理下发给‘牢’厂项目确认，完了后再跑去云谷‘牢’厂办公室跟工程师对接特性摸底需求，不知不觉就进入应答阶段了。</br>
‘牢’厂的尿性两天一报告，三天一汇报，每周一例会，时不时的还拉个电话会议给你整多一个啥需求，公司内部每周还有项目例会，项目会议，每周这些屁事搞完，都剩不了多少时间，感觉就是写不完的PPT，画不完的流程图，写代码的给直接干成项目管理了。
</br>
</br>
****

## 技术规格对比

![hwa_ntg](https://i.loli.net/2020/08/21/SdwEUAFBezZvaf7.png)</br>
</br>

![airpods_sudio](https://i.loli.net/2020/08/21/JtTcD145nOmVPZr.png)</br>
(新闻链接：&ensp;苹果头戴式耳机最新爆料 &ensp;  https://new.qq.com/rain/a/20200808A0JZIY00 )</br>

对比‘牢’厂和Apple的规格，相同之处都要求是High Quality Audio (‘牢’厂HWA), 支持ANC，支持Ear Detection, 这些技术规格用人话讲就是音质要好，指标参数要漂亮，用户体验要佳 (ANC让用户可以在嘈杂环境下使用，Ear Detect 即戴即使用，都可以归为用户体验)。</br>
从技术规格上分析，‘牢’厂在指标参数上不会比 Apple 的差，规划这个产品的 PM 看起来还是很牛X, 就等Apple的实际产品出来再PK一下。

### AOV （Always-On Voice)
在应答阶段‘牢’厂在需求包之外会提出许多花样, 要求供应商应答他们再来评估是否要放到需求包中。语音控制就是其中之一, 涉及到两个方面：VOA与Voice Control。</br>
语音引擎中文做的最好的是科大讯飞，英文非Amazon莫属，我一个蓝牙音耳机要整得这么高大上吗？内事不决问百度，外事不决问谷歌，度娘、谷大神轮番上阵后，思考一下。
语音音擎，偏重于在云端解决语音识别，要是往这两家的方向走跟蓝牙呼叫Siri功能有啥区别？‘牢’厂要的是本地语音识别，能做到开机/关机/上一曲/下一曲/音量加/音量减有限的几个命令，Siri 在关机状态下可开不了机。方向不对，赶紧撤退。</br>
供应商在哪里啊？没招，度娘、谷大神继续上场，把知名的半导体厂商官网挨个翻个遍，逐个去询信息，还真逮到一家: OnSemi，奥力给！硬件也反馈Knowles IA610支持VOA功能。有了两家，可以应付‘牢’厂的需求了。 接下来就是一顿常规操作，约供应商介绍产品，讨论技术规格。</br>
供应链回复说OnSemi没用过所以没有联系方式，这个星球上经营理验别具一格的一家半导体供应商竞然不知道，吐血！回到OnSemi官网找到深圳Office的电话打过去，咨询负责的销售的联系方式，一听说是给‘牢’厂做产品，说‘牢’厂他们有专职销售并提供联系方式 (‘牢’厂是VIP级别的待遇害)。拿到联系方式，反手打电话给‘牢’厂工程师，OnSemi销售你们比较熟，帮忙联系下要咨询Voice Command 相关产品，同时发邮件给OnSemi‘牢’厂专职销售咨询工程窗口。就这样跟OnSemi勾搭上了。</br>
搭上‘牢’厂的虎威，找供应商要技术支持通常是一件较容易的事，这些业界牛B的供应商小厂去咨询要支持，随便找个阿猫阿狗代理商(这已经是不错的待遇，再次一点的就是贸易商)来了解下有没有商机，很难拿到第一手资料，苦逼的只能把 datasheet 从头翻到尾，再从尾翻到头，或从某个不起眼的notes的字里行间找到你想要的数据。跟‘牢’厂配合这一方面还是比较爽的，有时候‘牢’厂工程师也会主动提供一些他们认可的供应商资料，对完成应答开发工作会很有帮助。</br>

#### Knowles IA610
Knowles MEMS microphone业界那是响当当。FAE介绍说 IA610 已经跟BES联调成功，申请参考代码，说是这个调试很麻烦云云, 不愿提供 (我勒个去，这哥们硬气！给不给参考代码是你的事，麻不麻烦那是我的事，哥 !)；申请demo平台，也提供不了，给建议去找 BES 申请。一听要找BES申请demo样机(BES是什么尿性？那基本都是有求无应)，赶紧寻求销售的帮助，无助于事。</br>
趁着别人还愿意打发你的时机，赶紧了解了一下 IA610 关注的相关特性。
IA610 是基于关键词的特征值语音识别算法，最多可以植入3段语音，中文3段语音总共不能超过10个字(印象中是这个数据)，唤醒功耗 (识别到关键词后唤醒并给出中断信号这整个过程) 大约电流3--4mA, 唤醒后提供一个中断信号给外部系统。关键词需要在工厂生产前植入，用户无法更改。</br>
了解了，告辞!</br>

![ia610_current](https://i.loli.net/2020/08/22/oDtdxqERjwp5JU3.png)
_IA610_Figure1_

![ia610_int](https://i.loli.net/2020/08/22/DS9pzQyH8qRJen7.png)
_IA610_Figure2_

#### OnSemi Sound Solution
##### LC823450
LC823450是音频处理系统LSI，支持 voice trigger 和 voice command，还集成蓝牙PHY, 再凑个蓝牙RF就是一颗集成蓝牙功能的完整本地语音控制 SoC。联系上海FAE申请 demo, 反馈信息回来 demo 在福州 AE 部门，要跟 AE 部门协调，几番邮件往来，终究也没能拿到 demo。功耗评估还是要继续，只好继续骚扰上海 FAE 寻求帮助，终于拿到了心心念念的数据。</br>

![](https://i.loli.net/2020/08/22/bzTLU4GjKBCaWD8.png)
</br>

功耗还是蛮大的，voice trigger 估计再怎么优化也要 1mA 以上，放到蓝牙耳机产品上会够呛。
后来 AE 部门的工程师带着他们日本的同事有过来交流，闲聊中得知这颗芯片是日本那边设计的，三星出过一款录音笔是用这颗芯片做的，在国内业务端也不清楚要应用到哪些产品上，所以不受总部重视。做 voice command 相关的产品感觉还是蛮好的。

##### Belasigna R281

支持Voice Wake-Up特性的MEMS Microphone; 另一家是OnSemi, 它有两款产品支持Voice Wake-Up, 分别是LC823450t和Belasigna R281。</br>
Belasigna R281 是基于声纹识别的关键词语音算法，用户可重复设置 3 段语音，3 段语音总共时间长度不能超过 1.5s。


![r281_current](https://i.loli.net/2020/08/22/xlwNPJSbCjAkoet.png)

### BES2300Y

蓝牙音频传输做死了SNR也不会超过75dB，High Quality Audio的SNR下限不会低于90dB，‘牢’厂就直接给出了SNR不低于110dB。


碰到错题还要划对勾的违心感。  
